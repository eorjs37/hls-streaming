<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>SERVICE WORKER</title>
	<link rel="stylesheet" href="../styles/reset.css">
	<link rel="stylesheet" href="../styles/_variables.css">
</head>
	<body>
		This is your first service worker
		<button onclick="onClickBtn()">클릭</button>
		<script>
			const registerServiceWorker = async () => {
				if("serviceWorker" in navigator){
					try {
						const registration = await navigator.serviceWorker.register("./service-worker.js");
						if (registration.installing) {
              console.log("Service worker installing");
            } else if (registration.waiting) {
              console.log("Service worker installed");
            } else if (registration.active) {
              console.log("Service worker active");
            }


					} catch (error) {
						console.error(`Registration failed with ${error}`);
					}
				}
			}

			registerServiceWorker();

			const onClickBtn = ()=>{
				navigator.serviceWorker.controller.postMessage({
					message: "Hello, service worker~!",
				});

			}

		</script>
	</body>
</html>